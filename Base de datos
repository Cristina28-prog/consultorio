CREATE TABLE `usuario` (
  `idUsuario` int NOT NULL,
  `Tipo_documento` varchar(45) NOT NULL,
  `Numero_documento` varchar(45) NOT NULL,
  `Nombre` varchar(45) NOT NULL,
  `Contrasenia` varchar(45) NOT NULL,
  `Tipoperfil` varchar(45) NOT NULL,
  PRIMARY KEY (`idUsuario`),
  UNIQUE KEY `idUsuario_UNIQUE` (`Tipo_documento`,`Numero_documento`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci

CREATE TABLE `medicamento` (
  `id_medicamento` varchar(45) NOT NULL,
  `nombre` varchar(45) NOT NULL,
  PRIMARY KEY (`id_medicamento`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci


CREATE TABLE `citas` (
  `idcitas` int NOT NULL AUTO_INCREMENT,
  `fecha` datetime(1) NOT NULL,
  `Id Usuario` int NOT NULL,
  PRIMARY KEY (`idcitas`,`Id Usuario`),
  KEY `FK_usuario_idusuario_idx` (`Id Usuario`),
  CONSTRAINT `FK_citas_usuario_idUsuario` FOREIGN KEY (`Id Usuario`) REFERENCES `usuario` (`idUsuario`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci

CREATE TABLE `usuario_medicamento` (
  `id_usuario_medicamento` varchar(15) NOT NULL,
  `Numero_documento` int NOT NULL,
  `id_medicamento` varchar(15) NOT NULL,
  `id_cita` int NOT NULL,
  PRIMARY KEY (`id_usuario_medicamento`),
  KEY `usuario_Numero_documento_idx` (`Numero_documento`),
  KEY `medicamento_id_medicamento_idx` (`id_medicamento`),
  KEY `cita_idcitas_idx` (`id_cita`),
  CONSTRAINT `FK_cita_idcitas` FOREIGN KEY (`id_cita`) REFERENCES `citas` (`idcitas`),
  CONSTRAINT `FK_medicamento_id_medicamento` FOREIGN KEY (`id_medicamento`) REFERENCES `medicamento` (`id_medicamento`),
  CONSTRAINT `FK_usuario_Numero_documento` FOREIGN KEY (`Numero_documento`) REFERENCES `usuario` (`idUsuario`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci

CREATE TABLE `usuario_has_medicamento` (
  `usuario_Numero_documento` int NOT NULL,
  `medicamento_id_medicamento` varchar(45) NOT NULL,
  `citas_idcitas` int NOT NULL,
  PRIMARY KEY (`usuario_Numero_documento`,`medicamento_id_medicamento`,`citas_idcitas`),
  KEY `medicamento_id_medicamento_idx` (`medicamento_id_medicamento`),
  KEY `citas_idcitas_idx` (`citas_idcitas`),
  KEY `usuario_Numero_documento` (`citas_idcitas`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci



